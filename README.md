# DoubanT250MovieAnalyse
## 实验报告
### 1.1 题目来源和背景
我平时喜欢看电影，但苦于找到好的电影，于是经常没事都会打开豆瓣电影推荐。在一次偶然中，打开了豆瓣电影榜单（图1），根据本学期python数据分析的相关知识，我对豆瓣电影Top250的电影的类型等进行各方面的分析和挖掘。 
图1豆瓣电影排行榜
### 1.2 实现思路和结论
- 1.首先我将网站上的内容爬取下来，存取到csv格式的文件以便于下一步的分析。在python爬虫代码中导入requests,re,csv,html库。首先利用requests获取网页，在获取过程中为了规避网站机器人检测，利用u-a伪装头部发送请求。获取的网页内容利用html的fromstring()方法转换成str类型。在以往的爬虫中通常利用BeautifulSoup库进行解析提取，但是用这种方法获取出来的数据还需要使用正则表达式进行下一部的解析。而使用Xpath爬取下来，在爬取速度上与Beautifulsoup相比会快一点，因为它直接对XML 文档中对元素和属性进行遍历，用这种方式结合浏览器中的Xpath Helper（如图2）插件速度能够精准的爬取所需要的内容。 图2 借助浏览器插件xPath和网页元素进行爬取查找
爬取下来的csv文件有5列（如图3），分别是movie_top , movie_name , movie_date , movie_country , movie_type。由于电影的国家和类型往往有几个，所以我在爬取下来保存为movie_country和movie_type的时候遇到一部电影有几个国家或者类型的使用”/”进行分隔。
 
图3 爬取后的csv文件
- 2.在对csv文件进行分析时，我用到wordcloud ，pandas ，numpy ，jieba等库。首先利用pd.read_csv()读取csv文件并保存在变量df中，随后对df进行分析。在电影年份上利用pandas将电影年份分段，按照每10年分成9个阶段，分别是'1930-1940', '1940-1950', '1950-1960', '1960-1970', '1970-1980', '1980-1990', '1990-2000', '2000-2010', '2010-2020'，随后调用bar库生成柱状图（如图4）。由图可以看出，豆瓣前250的电影主要集中在2000-2010年间为89部电影，其次是2010-2020年为65部电影，在1940-1950年间入选Top250排行榜的电影最少仅为1部。
 
图4 按照每10年排列豆瓣排名前250的电影年份
- 	3.通过DataFrame 的value_counts() 函数统计属性取值的个数。获得电影类型数量情况，并进行饼图绘制（图5），可得知Top250排行榜电影的各个年份，最早入选的电影年份为1931年爱情电影城市之光，其次到1936年的喜剧电影摩登时代。在排行榜的电影的国家中，第一名是美国135部，占比35.71%，第二是日本和英国各36部占比9.52%，第三是中国香港29部占比7.67%。中国大陆排名第四25部占比6.61%。
 
图5 豆瓣电影Top250的国家分布情况

- 	随后对每10年里国家为美国和中国大陆的电影的数量的变化进行分析，并绘制成折线图（如图6，7）。可以看到中国大陆的优质电影（进入豆瓣电影Top250）在1960年前一直为0，只有在1960-1980年间有两部，然而到1980-1990年中国优质电影开始较大增长，并在1990-2000年间达到顶峰，在此估计可能是受1978年中国改革开放的影响，及到后来中国特色社会主义市场经济体制的确立。外国的文化思潮开始进入中国，中国第五代导演的成长（指八十年代从北京电影学院毕业的年轻导演），这批导演在少年时代卷入了中国社会大动荡的漩涡中，有的下过乡，有的当过兵，经受了10年浩劫的磨难。在改革开放的年代，他们接受专业训练，带着创新的激情走上影坛，导致中国优质电影的出现与提高。

 
图6 每10年里国家为中国大陆的电影数量的变化

- 	在21世纪结合现代化信息技术的美国的优质电影开始出现井喷，新好莱坞电影工厂对电影的投入逐渐增加，运用各种新技术而具有视觉特效的大片《指环王》 《星球大战》 《蜘蛛侠》等漫威系列电影出现在影院，导致了美国优质电影数量的增加。
 
图7 每10年里国家为美国的电影数量的变化

- 	4.通过对电影类型的分析（图8）和剧情电影每10年的数量变化（图9），可以看到类型为剧情的电影占比最大（图10）从1980年间开始增长到现在，与2000-2010年间到达顶峰。剧情片是以故事剧情为主题的电影，也叫做故事电影。剧情片的节奏往往比较的慢，但是情节相对紧凑，往往是一种社会现象和一定人群的生活状态的写照。现代人们普遍喜欢看具有故事情节的影视作品如《阿甘正传》，《肖申克的救赎》，而这类型的影视作品容易引起观看者的共鸣，而导致该类型电影排名高。
 
图8 豆瓣电影Top250的类型分布情况
 
图9 每10年里类型为剧情的电影数量变化
 
图10 豆瓣类型电影词云
